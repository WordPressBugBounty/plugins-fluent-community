(()=>{if(document.querySelector(".fcom_top_menu")){const t=document.querySelector(".fcom_top_menu").offsetHeight;document.body.style.setProperty("--fcom-header-height",t+"px")}let n=localStorage.getItem("fcom_global_storage");n?n=JSON.parse(n):n={};function r(t,e=""){return n[t]||e}function l(t,e){n[t]=e,localStorage.setItem("fcom_global_storage",JSON.stringify(n))}function a(t){return r("groupStates",{})[t]??""}function d(){let t=document.querySelectorAll(".fcom_space_opener_btn");if(!t.length)return;function e(o){document.querySelector(".space_opened")&&document.querySelector(".space_opened").classList.remove("space_opened"),document.removeEventListener("click",e)}t.forEach(o=>{o.addEventListener("click",function(){document.querySelector(".feed_layout")&&document.querySelector(".feed_layout").classList.toggle("space_opened"),document.querySelector(".feed_layout").classList.contains("space_opened")?setTimeout(()=>{document.addEventListener("click",e)},0):document.removeEventListener("click",e)})})}d();function m(t,e){let o=r("groupStates",{});o[t]=e,l("groupStates",o)}const i=document.getElementById("fluent_community_sidebar_menu");i&&(i.addEventListener("click",function(){const t=event.target.closest(".space_section_title");if(!t)return;let e=t.getAttribute("data-group_id"),o=t.closest(".fcom_communities_menu");o&&o.classList.toggle("fcom_group_collapsed");let c=o&&o.classList.contains("fcom_group_collapsed");m("fcom_group_"+e,c?"collapsed":"expanded")}),document.querySelectorAll(".space_section_title").forEach(t=>{let e=t.getAttribute("data-group_id"),o=a("fcom_group_"+e),c=t.closest(".fcom_communities_menu");o==="collapsed"&&c&&c.classList.add("fcom_group_collapsed")}));function f(){if(window.fluentComAdmin&&window.fluentComAdmin.disable_color_switch=="yes")return document.querySelectorAll(".fcom_mode_switch").forEach(o=>{o.style.display="none"}),!1;function t(e){document.documentElement.classList.remove("dark"),e&&document.documentElement.classList.add(e),l("fcom_color_mode",e)}document.querySelectorAll(".fcom_mode_switch").forEach(e=>{e.addEventListener("click",function(){var o=document.documentElement.classList.contains("dark")?"light":"dark";t(o),document.querySelector(".feed_layout")&&document.querySelector(".feed_layout").classList.remove("space_opened")})})}if(f(),window.fcom_portal_general){let t=window.location.href;document.querySelectorAll(".fcom_menu_link").forEach(e=>{e.getAttribute("href")===t&&e.classList.add("router-link-exact-active")})}function _(){const t=document.getElementsByClassName("fcom_profile_extend");t.length&&[...t].forEach(e=>{let o=e.querySelector(".fcom_profile_menu"),c=e.querySelector(".fcom_profile_sub_menu");if(!o||!c)return;function u(p){e.classList.remove("fcom_extend_menu"),document.removeEventListener("click",u)}o.addEventListener("click",function(p){e.classList.toggle("fcom_extend_menu"),e.classList.contains("fcom_extend_menu")&&setTimeout(()=>{document.addEventListener("click",u)},0)})})}_();function s(){let t=document.querySelectorAll(".fcom_space_create_link");t.length&&t.forEach(e=>{e.addEventListener("click",function(o){window.fluentFrameworkApp&&window.fluentFrameworkApp.$eventBus&&(o.stopPropagation(),o.preventDefault(),window.fluentFrameworkApp.$eventBus.emit("createSpaceModal",{parent_id:e.getAttribute("data-parent_id")}))})})}s(),document.addEventListener("sidebar_menu_reloaded",function(){s()})})();
